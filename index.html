<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background: #000; font-family: 'Courier New', monospace;
        }

        /* 1. HOME MENU */
        #menu-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); color: white; z-index: 1000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .btn { padding: 15px 50px; font-size: 20px; cursor: pointer; margin: 10px; background: #1d4ed8; color: white; border: 2px solid white; }

        /* 2. GAME AREA & MOVING BACKGROUND */
        #game-area {
            display: none; width: 100%; height: 100%;
            background-image: url("https://cdnb.artstation.com/p/assets/images/images/011/445/369/large/remi-delmotte-hueco-mundo.jpg?1529609712&dl=1");
            background-size: cover; background-repeat: repeat-x;
            position: relative;
            animation: scrollMap 10s linear infinite;
        }

        @keyframes scrollMap {
            from { background-position: 0 0; }
            to { background-position: -2000px 0; }
        }

        /* 3. SONIC SPRITE (Replaced Blue Circle) */
        #sonic {
            position: absolute; 
            width: 140px; height: 140px; 
            background: url(https://docs.google.com/drawings/d/e/2PACX-1vSU2kymmebcoyonKiAeVWtczSiq12r7yeOqHpCD1P40lBrVvg-8P1cCEvyPFQMyNMn5G2g4cHHJT0Gz/pub?w=960&h=720);
            background-size: 960px 720px;
            background-position: -4px -96px; /* Sonic Standing/Running frame */
            bottom: 80px; left: 100px; z-index: 50;
        }

        /* 4. RINGS (On the ground) */
        .ring {
            position: absolute; 
            width: 60px; height: 60px; 
            background: url(https://docs.google.com/drawings/d/e/2PACX-1vSU2kymmebcoyonKiAeVWtczSiq12r7yeOqHpCD1P40lBrVvg-8P1cCEvyPFQMyNMn5G2g4cHHJT0Gz/pub?w=960&h=720);
            background-size: 960px 720px;
            background-position: -96px 0px; /* Ring frame */
            bottom: 100px; right: -60px;
        }

        #hud { position: absolute; top: 20px; left: 20px; color: yellow; font-size: 30px; font-weight: bold; text-shadow: 2px 2px #000; }
    </style>
</head>
<body>

    <div id="menu-view">
        <h1 style="font-size: 50px;">SONIC RUNNER</h1>
        <button class="btn" onclick="startLoading()">PLAY GAME</button>
        <button class="btn" onclick="alert('Sonic, Knuckles, and more coming soon!')">CHARACTERS</button>
    </div>

    <div id="game-area">
        <div id="hud">RINGS: <span id="r-count">0</span></div>
        <div id="sonic"></div>
    </div>

<script>
    var rings = 0;
    var isJumping = false;
    var ringAudio = new Audio('https://docs.google.com/uc?export=download&id=1ETKypIjRUWk4m4rle2X9nihfnzY7Ur4C');

    function startLoading() {
        $("#menu-view").fadeOut();
        $("#game-area").fadeIn();
        spawnGroundRing();
    }

    // JUMPING
    $(document).on('keydown', function(e) {
        if ((e.keyCode == 32 || e.keyCode == 38) && !isJumping) {
            isJumping = true;
            // Switch to Jump frame
            $("#sonic").css("background-position", "-192px -96px"); 
            
            $("#sonic").animate({ bottom: "280px" }, 400).animate({ bottom: "80px" }, 400, function() {
                isJumping = false;
                // Switch back to Run frame
                $("#sonic").css("background-position", "-4px -96px");
            });
        }
    });

    // GROUND RINGS
    function spawnGroundRing() {
        var ringId = "ring" + Date.now();
        $("#game-area").append('<div id="' + ringId + '" class="ring"></div>');
        var currentRing = $("#" + ringId);

        // Move Ring Right to Left
        currentRing.animate({ right: "110%" }, 2500, "linear", function() {
            $(this).remove();
        });

        // HIT DETECTION
        var checkHit = setInterval(function() {
            var s = $("#sonic").offset();
            var r = currentRing.offset();
            if (r) {
                var dx = Math.abs(s.left - r.left);
                var dy = Math.abs(s.top - r.top);
                if (dx < 70 && dy < 70) {
                    rings++;
                    $("#r-count").text(rings);
                    ringAudio.play();
                    currentRing.remove();
                    clearInterval(checkHit);
                }
            } else {
                clearInterval(checkHit);
            }
        }, 50);

        setTimeout(spawnGroundRing, Math.random() * 1500 + 800);
    }
</script>

</body>
</html>
