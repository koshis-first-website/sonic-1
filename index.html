<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
            background: #222; font-family: 'Arial', sans-serif;
        }

        /* 1. HOME MENU */
        #menu-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #111; color: white; z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* 2. LOADING SCREEN */
        #loading-view {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 200; flex-direction: column; align-items: center; justify-content: center;
            color: cyan;
        }
        #bar-bg { width: 250px; height: 20px; border: 2px solid white; margin-top: 10px; }
        #bar-fill { width: 0%; height: 100%; background: cyan; }

        /* 3. GAME AREA (Force Visible Background) */
        #game-layer {
            display: none; width: 100%; height: 100%;
            background-image: url("https://cdnb.artstation.com/p/assets/images/images/011/445/369/large/remi-delmotte-hueco-mundo.jpg?1529609712&dl=1");
            background-size: cover; position: relative;
        }

        #sonic {
            position: absolute; 
            width: 80px; height: 80px; 
            background: #1d4ed8; /* Solid Blue first to ensure it shows */
            border-radius: 50%; border: 4px solid white;
            top: 400px; left: 100px; z-index: 50;
        }

        #ring {
            position: absolute; 
            width: 40px; height: 40px; 
            background: #facc15; /* Solid Gold first */
            border-radius: 50%; border: 2px solid white;
            display: none; z-index: 40;
        }

        #score-board { position: absolute; top: 20px; left: 20px; color: white; font-size: 30px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="menu-view">
        <h1>SONIC RUNNER</h1>
        <button style="padding:15px 50px; font-size:20px; cursor:pointer;" onclick="startLoad()">PLAY GAME</button>
    </div>

    <div id="loading-view">
        <h2>LOADING ASSETS...</h2>
        <div id="bar-bg"><div id="bar-fill"></div></div>
    </div>

    <div id="game-layer">
        <div id="score-board">RINGS: <span id="r-count">0</span></div>
        <div id="sonic"></div>
        <div id="ring"></div>
    </div>

<script>
    var rings = 0;
    var sonicPos = 100;

    function startLoad() {
        $("#menu-view").hide();
        $("#loading-view").css("display", "flex");
        
        var progress = 0;
        var timer = setInterval(function() {
            progress += 10;
            $("#bar-fill").css("width", progress + "%");
            if (progress >= 100) {
                clearInterval(timer);
                playNow();
            }
        }, 100);
    }

    function playNow() {
        $("#loading-view").hide();
        $("#game-layer").show();
        
        // Key Controls
        $(document).on('keydown', function(e) {
            if (e.keyCode == 39) { // Right Arrow
                sonicPos += 40;
            } else if (e.keyCode == 37) { // Left Arrow
                sonicPos -= 40;
            }
            $("#sonic").css("left", sonicPos + "px");
        });

        dropRing();
    }

    function dropRing() {
        var randomX = Math.random() * (window.innerWidth - 100);
        $("#ring").css({"top": "-50px", "left": randomX, "display": "block"});
        
        $("#ring").animate({ top: window.innerHeight + "px" }, 2500, "linear", function() {
            var sX = $("#sonic").position().left;
            var rX = $("#ring").position().left;

            // Simple Hit Check
            if (Math.abs(sX - rX) < 80) {
                rings++;
                $("#r-count").text(rings);
            }
            dropRing();
        });
    }
</script>

</body>
</html>
